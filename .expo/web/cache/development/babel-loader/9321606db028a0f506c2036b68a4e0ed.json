{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nvar _jsxFileName = \"/Users/kharl/pawSpace/screens/PostView.js\";\nimport React from 'react';\nimport styles from \"../styles\";\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { Ionicons } from '@expo/vector-icons';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { getlocationPosts, likePost, unlikePost, getPosts, getPost } from \"../actions/post\";\nimport moment from 'moment';\nimport { getDog } from \"../actions/dog\";\nimport DoubleClick from 'react-native-double-tap';\nimport { Video, Audio } from 'expo-av';\n\nvar PostView = function (_React$Component) {\n  _inherits(PostView, _React$Component);\n\n  function PostView(props) {\n    var _this;\n\n    _classCallCheck(this, PostView);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PostView).call(this, props));\n\n    _this.likePost = function (post) {\n      console.log(\"in like post\");\n      var dogId = _this.props.dog.dogId;\n\n      if (post.likes.includes(dogId)) {\n        _this.props.unlikePost(post);\n\n        _this.props.getPost(post.id);\n      } else {\n        _this.props.likePost(post);\n\n        _this.props.getPost(post.id);\n      }\n    };\n\n    _this.state = {\n      like: false\n    };\n    return _this;\n  }\n\n  _createClass(PostView, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      return _regeneratorRuntime.async(function componentDidMount$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              this.props.getPosts();\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(this.playInSilentMode());\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"playInSilentMode\",\n    value: function playInSilentMode() {\n      var sound;\n      return _regeneratorRuntime.async(function playInSilentMode$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(Audio.setAudioModeAsync({\n                playsInSilentModeIOS: true,\n                allowsRecordingIOS: false,\n                interruptionModeIOS: Audio.INTERRUPTION_MODE_IOS_MIX_WITH_OTHERS,\n                shouldDuckAndroid: false,\n                interruptionModeAndroid: Audio.INTERRUPTION_MODE_ANDROID_DO_NOT_MIX,\n                playThroughEarpieceAndroid: true,\n                staysActiveInBackground: false\n              }));\n\n            case 2:\n              _context2.next = 4;\n              return _regeneratorRuntime.awrap(Audio.setIsEnabledAsync(true));\n\n            case 4:\n              sound = new Audio.Sound();\n              _context2.next = 7;\n              return _regeneratorRuntime.awrap(sound.loadAsync(require(\"../assets/500-milliseconds-of-silence.mp3\")));\n\n            case 7:\n              _context2.next = 9;\n              return _regeneratorRuntime.awrap(sound.playAsync());\n\n            case 9:\n              sound.setIsMutedAsync(true);\n              sound.setIsLoopingAsync(true);\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var navigation = this.props.navigation;\n      return React.createElement(View, {\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        }\n      }, React.createElement(FlatList, {\n        data: this.props.post.postFeed,\n        keyExtractor: function keyExtractor(item) {\n          return item.id;\n        },\n        renderItem: function renderItem(_ref) {\n          var item = _ref.item;\n          var liked = item.likes.includes(_this2.props.dog.dogId);\n          return React.createElement(View, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 84\n            }\n          }, React.createElement(View, {\n            style: [styles.row, styles.space],\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 85\n            }\n          }, React.createElement(View, {\n            style: [styles.row, styles.center],\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 86\n            }\n          }, React.createElement(TouchableOpacity, {\n            onPress: function onPress() {\n              return _this2.goToDog(item);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 87\n            }\n          }, React.createElement(Image, {\n            style: styles.roundImage,\n            source: {\n              uri: item.dog.photo\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 88\n            }\n          })), React.createElement(View, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 90\n            }\n          }, React.createElement(TouchableOpacity, {\n            onPress: function onPress() {\n              return _this2.goToDog(item);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 91\n            }\n          }, React.createElement(Text, {\n            style: styles.bold,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 92\n            }\n          }, item.dogTag)), React.createElement(Text, {\n            style: [styles.gray, styles.small],\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 94\n            }\n          }, moment(item.date).format('ll')), React.createElement(TouchableOpacity, {\n            onPress: function onPress() {\n              return _this2.navigateMap(item);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 95\n            }\n          }, React.createElement(Text, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 96\n            }\n          }, item.postLocation ? item.postLocation.name : null))))), React.createElement(DoubleClick, {\n            doubleTap: function doubleTap() {\n              _this2.likePost(item);\n            },\n            delay: 200,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 101\n            }\n          }, item.isVideo === true ? React.createElement(Video, {\n            source: {\n              uri: item.postPhoto\n            },\n            rate: 1.0,\n            volume: 1.0,\n            isMuted: true,\n            resizeMode: \"cover\",\n            shouldPlay: true,\n            isLooping: true,\n            style: styles.homeVideo,\n            useNativeControls: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 106\n            }\n          }) : React.createElement(Image, {\n            style: styles.homeImage,\n            source: {\n              uri: item.postPhoto\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 117\n            }\n          })), React.createElement(View, {\n            style: styles.row,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 120\n            }\n          }, React.createElement(TouchableOpacity, {\n            onPress: function onPress() {\n              return _this2.likePost(item);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 121\n            }\n          }, React.createElement(Ionicons, {\n            style: {\n              marginLeft: 50,\n              marginTop: 5\n            },\n            color: liked ? '#0000ff' : '#000',\n            name: liked ? 'ios-heart' : 'ios-heart-empty',\n            size: 25,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 122\n            }\n          }), React.createElement(Text, {\n            style: {\n              fontWeight: 'bold',\n              marginTop: 0,\n              marginLeft: 51\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 124\n            }\n          }, item.likes.length, \" Licks\")), React.createElement(TouchableOpacity, {\n            onPress: function onPress() {\n              return _this2.props.navigation.navigate('Weights');\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 127\n            }\n          }, React.createElement(Ionicons, {\n            style: {\n              marginLeft: 100,\n              marginTop: 5\n            },\n            name: \"ios-chatbubbles\",\n            size: 25,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 128\n            }\n          })), React.createElement(Ionicons, {\n            style: {\n              marginLeft: 100,\n              marginTop: 5\n            },\n            name: \"ios-flag\",\n            size: 25,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 131\n            }\n          })), React.createElement(Text, {\n            style: {\n              marginLeft: 50,\n              marginTop: 5,\n              marginBottom: 10\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 134\n            }\n          }, item.postDescription), React.createElement(TouchableOpacity, {\n            onPress: function onPress() {\n              return _this2.props.navigation.navigate('Comment', item);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 135\n            }\n          }, React.createElement(Text, {\n            style: {\n              color: '#adadad',\n              fontSize: 10,\n              marginBottom: 5,\n              marginLeft: 50\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 136\n            }\n          }, \"View Comments\")));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        }\n      }));\n    }\n  }]);\n\n  return PostView;\n}(React.Component);\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    getlocationPosts: getlocationPosts,\n    likePost: likePost,\n    unlikePost: unlikePost,\n    getPosts: getPosts,\n    getPost: getPost,\n    getDog: getDog\n  }, dispatch);\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    navigation: state.navigation,\n    post: state.post,\n    user: state.user,\n    dog: state.dog\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PostView);","map":{"version":3,"sources":["/Users/kharl/pawSpace/screens/PostView.js"],"names":["React","styles","connect","bindActionCreators","Ionicons","getlocationPosts","likePost","unlikePost","getPosts","getPost","moment","getDog","DoubleClick","Video","Audio","PostView","props","post","console","log","dogId","dog","likes","includes","id","state","like","playInSilentMode","setAudioModeAsync","playsInSilentModeIOS","allowsRecordingIOS","interruptionModeIOS","INTERRUPTION_MODE_IOS_MIX_WITH_OTHERS","shouldDuckAndroid","interruptionModeAndroid","INTERRUPTION_MODE_ANDROID_DO_NOT_MIX","playThroughEarpieceAndroid","staysActiveInBackground","setIsEnabledAsync","sound","Sound","loadAsync","require","playAsync","setIsMutedAsync","setIsLoopingAsync","navigation","container","postFeed","item","liked","row","space","center","goToDog","roundImage","uri","photo","bold","dogTag","gray","small","date","format","navigateMap","postLocation","name","isVideo","postPhoto","homeVideo","homeImage","marginLeft","marginTop","fontWeight","length","navigate","marginBottom","postDescription","color","fontSize","Component","mapDispatchToProps","dispatch","mapStateToProps","user"],"mappings":"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","sourcesContent":["import React from 'react';\nimport styles from '../styles'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { Ionicons } from '@expo/vector-icons';\nimport { Text, View, Button, Image, FlatList, TouchableOpacity } from 'react-native';\nimport { getlocationPosts, likePost, unlikePost, getPosts,getPost } from '../actions/post'\nimport moment from 'moment'\nimport { getDog } from '../actions/dog';\nimport DoubleClick from 'react-native-double-tap';\nimport { Video,Audio} from 'expo-av';\n\nclass PostView extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            like: false\n        }\n      }\n\n  async componentDidMount() {\n    this.props.getPosts()\n    // this method is a work around to get audio to automatically play when the ringer is off for the phone\n    await this.playInSilentMode()\n\n\n  }\n\n  likePost = (post) => {\n\n    console.log(\"in like post\")\n    const { dogId } = this.props.dog\n    if (post.likes.includes(dogId)) {\n      this.props.unlikePost(post)\n      this.props.getPost(post.id)\n    } else {\n      this.props.likePost(post)\n      this.props.getPost(post.id)\n    }\n  }\n\n  async playInSilentMode() {\n    // To get around the fact that audio in a `WebView` will be muted in silent mode\n    // See: https://github.com/expo/expo/issues/211\n    //\n    // Based off crazy hack to get the sound working on iOS in silent mode (ringer muted/on vibrate)\n    // https://github.com/expo/expo/issues/211#issuecomment-454319601\n    await Audio.setAudioModeAsync({\n      playsInSilentModeIOS: true,\n      allowsRecordingIOS: false,\n      interruptionModeIOS: Audio.INTERRUPTION_MODE_IOS_MIX_WITH_OTHERS,\n      shouldDuckAndroid: false,\n      interruptionModeAndroid: Audio.INTERRUPTION_MODE_ANDROID_DO_NOT_MIX,\n      playThroughEarpieceAndroid: true,\n      staysActiveInBackground: false\n    });\n    await Audio.setIsEnabledAsync(true);\n    // console.log(\" ðŸ”ˆ done: setIsEnabledAsync\");\n    const sound = new Audio.Sound();\n    await sound.loadAsync(\n      require(\"../assets/500-milliseconds-of-silence.mp3\") // from https://github.com/anars/blank-audio\n    );\n    // console.log(\" ðŸ”ˆ done: sound.loadAsync\");\n    await sound.playAsync();\n    sound.setIsMutedAsync(true);\n    sound.setIsLoopingAsync(true);\n    // console.log(\" ðŸ”ˆ done: sound.playAsync\");\n  }\n  \n\n  render() {\n    const { navigation } = this.props;\n    //if(this.props.post === null) return null\n    //const liked = this.props.post.likes.includes(this.props.dog.dogId)\n    return (\n        <View style={styles.container}>\n        <FlatList\n          data={this.props.post.postFeed}\n          keyExtractor={(item) => item.id}\n          renderItem={({ item }) => {\n            let liked = item.likes.includes(this.props.dog.dogId)\n            return (   \n              <View>\n                <View style={[styles.row, styles.space]}>\n                  <View style={[styles.row, styles.center]}>\n                    <TouchableOpacity onPress={() => this.goToDog(item)} >\n                      <Image style={styles.roundImage} source={{ uri: item.dog.photo}} />\n                    </TouchableOpacity>\n                    <View>\n                    <TouchableOpacity onPress={() => this.goToDog(item)}>\n                      <Text style={styles.bold}>{item.dogTag}</Text>\n                    </TouchableOpacity>\n                      <Text style={[styles.gray, styles.small]}>{moment(item.date).format('ll')}</Text>\n                      <TouchableOpacity onPress={() => this.navigateMap(item)} >\n                        <Text>{item.postLocation ? item.postLocation.name : null}</Text>\n                      </TouchableOpacity>\n                    </View>\n                  </View>\n                </View>\n                <DoubleClick\n                      doubleTap={() => {this.likePost(item)}}\n                      delay={200}>\n                     {\n                        item.isVideo===true ?\n                        <Video\n                        source={{ uri: item.postPhoto }}\n                        rate={1.0}\n                        volume={1.0}\n                        isMuted={true}\n                        resizeMode=\"cover\"\n                        shouldPlay\n                        isLooping\n                        style={styles.homeVideo}\n                        useNativeControls={true}\n                      />:\n                    <Image style={styles.homeImage} source={{ uri: item.postPhoto }} />\n                      }\n                </DoubleClick>\n                <View style={styles.row}>\n                <TouchableOpacity onPress={() => this.likePost(item)} >\n                <Ionicons style={{ marginLeft: 50, marginTop: 5 }} color={liked ? '#0000ff' : '#000'} name={liked ? 'ios-heart' : 'ios-heart-empty'} size={25} \n                  />\n                  <Text style={{ fontWeight: 'bold' ,marginTop: 0,marginLeft: 51}}>{item.likes.length} Licks</Text>\n                \n                </TouchableOpacity>\n                  <TouchableOpacity onPress={() => this.props.navigation.navigate('Weights')} >\n                    <Ionicons style={{ marginLeft: 100, marginTop: 5 }} name='ios-chatbubbles' size={25} />\n                  </TouchableOpacity>\n                  \n                  <Ionicons style={{ marginLeft: 100, marginTop: 5 }} name='ios-flag' size={25} />\n                </View>\n                \n                <Text style={{ marginLeft: 50, marginTop: 5, marginBottom: 10 }}>{item.postDescription}</Text>\n                <TouchableOpacity onPress={() => this.props.navigation.navigate('Comment', item)} >\n                <Text style={{color:'#adadad', fontSize:10, marginBottom: 5,marginLeft: 50}}>View Comments</Text>\n                  </TouchableOpacity>\n                \n              </View>\n            )\n          }}\n        />\n      </View>\n    );\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({ getlocationPosts, likePost, unlikePost,getPosts,getPost,getDog }, dispatch)\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    navigation: state.navigation,\n    post: state.post, \n    user: state.user,\n    dog: state.dog\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PostView)\n\n"]},"metadata":{},"sourceType":"module"}