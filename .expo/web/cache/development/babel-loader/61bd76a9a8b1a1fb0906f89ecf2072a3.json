{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nvar _jsxFileName = \"/Users/kharl/pawSpace/screens/ItsAMatch.js\";\nimport React, { Component } from \"react\";\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport styles from \"../styles\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { getDog, getDogs } from \"../actions/dog\";\nimport Card from \"./Card\";\nimport * as firebase from 'firebase';\nimport DogParks from \"./DogParks\";\nimport SwipeCards from 'react-native-swipe-cards';\nimport db from \"../config/firebase\";\nimport ConfettiCannon from 'react-native-confetti-cannon';\nimport * as Permissions from 'expo-permissions';\nimport * as Location from 'expo-location';\nvar GOOGLE_PLACEAPI = 'https://maps.googleapis.com/maps/api/place/textsearch/json?query=dogpark+in+';\nvar key = 'AIzaSyCKtd8tWSWZ1jMR8tw11c-FgmIPsF9Ycqk';\nvar GOOGLE_API = 'https://maps.googleapis.com/maps/api/geocode/json?';\n\nvar _Dimensions$get = Dimensions.get('window'),\n    width = _Dimensions$get.width,\n    height = _Dimensions$get.height;\n\nvar BOTTOM_BAR_HEIGHT = !Platform.isPad ? 29 : 49;\nvar imageUnavailable = 'https://us.123rf.com/450wm/pavelstasevich/pavelstasevich1811/pavelstasevich181101028/112815904-stock-vector-no-image-available-icon-flat-vector-illustration.jpg?ver=6';\n\nvar ItsAMatch = function (_Component) {\n  _inherits(ItsAMatch, _Component);\n\n  function ItsAMatch(props) {\n    var _this;\n\n    _classCallCheck(this, ItsAMatch);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ItsAMatch).call(this, props));\n\n    _this.componentDidMount = function () {\n      _this.getMyLocation();\n\n      var card = _this.props.navigation.getParam('card', '');\n    };\n\n    _this.getMyLocation = function _callee() {\n      var _await$Permissions$as, status, location, url, response, response1, data, data1, ind, ind1, i, res;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.LOCATION));\n\n            case 2:\n              _await$Permissions$as = _context.sent;\n              status = _await$Permissions$as.status;\n\n              if (status !== 'granted') {\n                _this.setState({\n                  myLocation: 'Permission denied'\n                });\n              }\n\n              _context.next = 7;\n              return _regeneratorRuntime.awrap(Location.getCurrentPositionAsync({}));\n\n            case 7:\n              location = _context.sent;\n              url = GOOGLE_API + \"latlng=\" + location.coords.latitude + \",\" + location.coords.longitude + \"&key=\" + 'AIzaSyCKtd8tWSWZ1jMR8tw11c-FgmIPsF9Ycqk';\n              _context.next = 11;\n              return _regeneratorRuntime.awrap(fetch(url));\n\n            case 11:\n              response = _context.sent;\n              _context.next = 14;\n              return _regeneratorRuntime.awrap(fetch(GOOGLE_PLACEAPI));\n\n            case 14:\n              response1 = _context.sent;\n              _context.next = 17;\n              return _regeneratorRuntime.awrap(response.json());\n\n            case 17:\n              data = _context.sent;\n              _context.next = 20;\n              return _regeneratorRuntime.awrap(response1.json());\n\n            case 20:\n              data1 = _context.sent;\n\n              for (i = 0; i < data.results.length; ++i) {\n                if (data.results[i].types[0] == \"postal_code\") {\n                  ind = data.results[i].address_components[0].long_name;\n                }\n\n                if (data.results[i].types[0] == \"locality\") {\n                  ind1 = data.results[i].address_components[0].long_name;\n                }\n              }\n\n              res = JSON.stringify(data.results[0].address_components[6].types[0]);\n\n              _this.setState({\n                myLocation: location,\n                zipCode: ind,\n                locationLoading: true,\n                city: ind1\n              }, function () {\n                _this.getDogParks();\n              });\n\n            case 24:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    };\n\n    _this.getDogParks = function _callee2() {\n      var response, data, res;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              console.log(\"city\" + _this.state.city);\n              _context2.next = 3;\n              return _regeneratorRuntime.awrap(fetch(GOOGLE_PLACEAPI + _this.state.city + '&key=' + key));\n\n            case 3:\n              response = _context2.sent;\n              _context2.next = 6;\n              return _regeneratorRuntime.awrap(response.json());\n\n            case 6:\n              data = _context2.sent;\n\n              _this.setState({\n                DogParks: data.results\n              });\n\n              res = JSON.stringify(_this.state.DogParks[3]);\n\n              _this.getDogParkPhoto();\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      });\n    };\n\n    _this.getDogParkPhoto = function _callee3() {\n      var response1, response2, response3, response4, url1, url2, url3, url4;\n      return _regeneratorRuntime.async(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              url1 = \"https://maps.googleapis.com/maps/api/place/photo?maxwidth=1000&photoreference=\" + (_this.state.DogParks[0] ? _this.state.DogParks[0].photos[0].photo_reference : imageUnavailable) + \"&key=AIzaSyCKtd8tWSWZ1jMR8tw11c-FgmIPsF9Ycqk\";\n              _context3.next = 3;\n              return _regeneratorRuntime.awrap(fetch(url1));\n\n            case 3:\n              response1 = _context3.sent;\n              url2 = \"https://maps.googleapis.com/maps/api/place/photo?maxwidth=1000&photoreference=\" + (_this.state.DogParks[1] ? _this.state.DogParks[1].photos[0].photo_reference : imageUnavailable) + \"&key=AIzaSyCKtd8tWSWZ1jMR8tw11c-FgmIPsF9Ycqk\";\n              _context3.next = 7;\n              return _regeneratorRuntime.awrap(fetch(url2));\n\n            case 7:\n              response2 = _context3.sent;\n              url3 = \"https://maps.googleapis.com/maps/api/place/photo?maxwidth=1000&photoreference=\" + (_this.state.DogParks[2] ? _this.state.DogParks[2].photos[0].photo_reference : imageUnavailable) + \"&key=AIzaSyCKtd8tWSWZ1jMR8tw11c-FgmIPsF9Ycqk\";\n              _context3.next = 11;\n              return _regeneratorRuntime.awrap(fetch(url3));\n\n            case 11:\n              response3 = _context3.sent;\n              url4 = \"https://maps.googleapis.com/maps/api/place/photo?maxwidth=1000&photoreference=\" + (_this.state.DogParks[3] ? _this.state.DogParks[3].photos[0].photo_reference : imageUnavailable) + \"&key=AIzaSyCKtd8tWSWZ1jMR8tw11c-FgmIPsF9Ycqk\";\n              _context3.next = 15;\n              return _regeneratorRuntime.awrap(fetch(url4));\n\n            case 15:\n              response4 = _context3.sent;\n\n              _this.setState({\n                DogParkPhotos: [response1, response2, response3, response4],\n                loadingPark: true\n              });\n\n            case 17:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      });\n    };\n\n    _this.state = {\n      DogParks: {},\n      city: \"\",\n      DogParkPhotos: []\n    };\n    return _this;\n  }\n\n  _createClass(ItsAMatch, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var card = this.props.navigation.getParam('card', '');\n      return React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        }\n      }, React.createElement(ScrollView, {\n        style: {\n          paddingTop: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontWeight: 'bold',\n          color: '#ff0000',\n          fontSize: 40,\n          paddingLeft: width / 2 - 100\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        }\n      }, \"Its a Match!\"), React.createElement(Text, {\n        style: {\n          paddingLeft: width / 2 - 100,\n          paddingTop: 10,\n          fontWeight: 'bold'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        }\n      }, \"You and \", card.dogname, \" Liked each other\"), React.createElement(View, {\n        style: {\n          flexDirection: \"row\",\n          flexWrap: \"wrap\",\n          justifyContent: \"space-between\",\n          paddingTop: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        }\n      }, React.createElement(View, {\n        style: {\n          paddingTop: 3,\n          paddingLeft: 15,\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        }\n      }, React.createElement(Image, {\n        style: styles1.imageContainer,\n        source: {\n          uri: this.props.dog.photo\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        }\n      }), React.createElement(Text, {\n        style: styles1.title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        }\n      }, this.props.dog.dogname), React.createElement(Text, {\n        style: styles1.caption,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        }\n      }, this.props.dog.breed)), React.createElement(View, {\n        style: {\n          paddingTop: 3,\n          paddingLeft: 15,\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        }\n      }, React.createElement(Image, {\n        style: styles1.imageContainer,\n        source: {\n          uri: card.photo\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        }\n      }), React.createElement(Text, {\n        style: styles1.title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        }\n      }, card.dogname), React.createElement(Text, {\n        style: styles1.caption,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        }\n      }, card.breed))), React.createElement(Text, {\n        style: {\n          paddingTop: 8,\n          paddingHorizontal: 25,\n          paddingBottom: 10,\n          fontWeight: 'bold'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        }\n      }, \"Plan a play date at the nearest dog park which is:\"), React.createElement(View, {\n        style: {\n          paddingLeft: 100\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        }\n      }, React.createElement(DogParks, {\n        imageUri: this.state.DogParkPhotos[0] ? this.state.DogParkPhotos[0].url : imageUnavailable,\n        width: width,\n        name: this.state.DogParks[0] ? this.state.DogParks[0].name : \"No dog Park Available\",\n        type: this.state.DogParks[0] ? this.state.DogParks[0].formatted_address : \"No dog Park Available\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        }\n      })), React.createElement(View, {\n        style: {\n          flexDirection: \"row\",\n          flexWrap: \"wrap\",\n          justifyContent: \"space-between\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        }\n      }, React.createElement(TouchableOpacity, {\n        style: styles1.button,\n        onPress: function onPress() {\n          return _this2.props.navigation.navigate('Chat', {\n            user: card,\n            page: 'ItsaMatch'\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        }\n      }, React.createElement(Text, {\n        style: styles.bold,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        }\n      }, \"Chat\")), React.createElement(TouchableOpacity, {\n        style: styles1.button,\n        onPress: function onPress() {\n          return _this2.props.navigation.goBack();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        }\n      }, React.createElement(Text, {\n        style: styles.bold,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        }\n      }, \"Continue Swiping\"))), React.createElement(ConfettiCannon, {\n        count: 200,\n        fallSpeed: 4000,\n        fadeOut: true,\n        origin: {\n          x: -10,\n          y: 0\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        }\n      })));\n    }\n  }]);\n\n  return ItsAMatch;\n}(Component);\n\nvar styles1 = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center'\n  },\n  button: {\n    margin: 5,\n    padding: 3,\n    alignItems: 'center',\n    borderColor: '#d3d3d3',\n    borderWidth: 1,\n    borderRadius: 5,\n    width: 150\n  },\n  imageContainer: {\n    width: (width * .93 - 30) / 2,\n    height: (height - BOTTOM_BAR_HEIGHT * 12) / 1.5,\n    borderRadius: 25,\n    overflow: 'hidden'\n  },\n  title: {\n    position: 'absolute',\n    left: 25,\n    bottom: 30,\n    fontSize: 25,\n    fontWeight: 'bold',\n    color: '#fff'\n  },\n  caption: {\n    position: 'absolute',\n    left: 25,\n    bottom: 10,\n    fontSize: 15,\n    color: '#fff'\n  }\n});\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    getDog: getDog,\n    getDogs: getDogs\n  }, dispatch);\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    post: state.post,\n    user: state.user,\n    userprofile: state.profile,\n    dog: state.dog,\n    cards: state.cards\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ItsAMatch);","map":{"version":3,"sources":["/Users/kharl/pawSpace/screens/ItsAMatch.js"],"names":["React","Component","connect","bindActionCreators","styles","getDog","getDogs","Card","firebase","DogParks","SwipeCards","db","ConfettiCannon","Permissions","Location","GOOGLE_PLACEAPI","key","GOOGLE_API","Dimensions","get","width","height","BOTTOM_BAR_HEIGHT","Platform","isPad","imageUnavailable","ItsAMatch","props","componentDidMount","getMyLocation","card","navigation","getParam","askAsync","LOCATION","status","setState","myLocation","getCurrentPositionAsync","location","url","coords","latitude","longitude","fetch","response","response1","json","data","data1","i","results","length","types","ind","address_components","long_name","ind1","res","JSON","stringify","zipCode","locationLoading","city","getDogParks","console","log","state","getDogParkPhoto","url1","photos","photo_reference","url2","response2","url3","response3","url4","response4","DogParkPhotos","loadingPark","paddingTop","fontWeight","color","fontSize","paddingLeft","dogname","flexDirection","flexWrap","justifyContent","flex","styles1","imageContainer","uri","dog","photo","title","caption","breed","paddingHorizontal","paddingBottom","name","formatted_address","button","navigate","user","page","bold","goBack","x","y","StyleSheet","create","container","alignItems","margin","padding","borderColor","borderWidth","borderRadius","overflow","position","left","bottom","mapDispatchToProps","dispatch","mapStateToProps","post","userprofile","profile","cards"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport styles from '../styles'\nimport { View, Text, StyleSheet, Image, Dimensions, Platform,ScrollView, TouchableOpacity} from \"react-native\";\nimport {getDog,getDogs} from '../actions/dog'\nimport Card from './Card';\nimport * as firebase from 'firebase';\nimport DogParks from './DogParks';\nimport SwipeCards from 'react-native-swipe-cards'\nimport db from '../config/firebase';\nimport ConfettiCannon from 'react-native-confetti-cannon';\nimport * as Permissions from 'expo-permissions'\nimport * as Location from 'expo-location'\nconst GOOGLE_PLACEAPI='https://maps.googleapis.com/maps/api/place/textsearch/json?query=dogpark+in+'\nconst key = 'AIzaSyCKtd8tWSWZ1jMR8tw11c-FgmIPsF9Ycqk'\nconst GOOGLE_API = 'https://maps.googleapis.com/maps/api/geocode/json?'\nconst { width,height } = Dimensions.get('window');\nconst BOTTOM_BAR_HEIGHT = !Platform.isPad ? 29 : 49 // found from https://stackoverflow.com/a/50318831/6141587\nlet imageUnavailable = 'https://us.123rf.com/450wm/pavelstasevich/pavelstasevich1811/pavelstasevich181101028/112815904-stock-vector-no-image-available-icon-flat-vector-illustration.jpg?ver=6'\n\nclass ItsAMatch extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            DogParks:{},\n            city:\"\",\n            DogParkPhotos:[]\n        }\n    }\n\n    componentDidMount = () => {\n        this.getMyLocation()\n        const card = this.props.navigation.getParam('card','')\n       \n    }\n\n    getMyLocation = async () => {\n        let { status } = await Permissions.askAsync(Permissions.LOCATION);\n        if (status !== 'granted') {\n            this.setState({\n                myLocation: 'Permission denied',\n            });\n        }\n        let location = await Location.getCurrentPositionAsync({});\n        const url = `${GOOGLE_API}latlng=${location.coords.latitude},${location.coords.longitude}&key=${'AIzaSyCKtd8tWSWZ1jMR8tw11c-FgmIPsF9Ycqk'}`\n        \n        const response = await fetch(url)\n        const response1 = await fetch(GOOGLE_PLACEAPI)\n        const data = await response.json()\n        const data1 = await response1.json()\n       \n        let ind;\n        let ind1\n        for(var i=0;i<data.results.length;++i){\n          \n          \n          if(data.results[i].types[0]==\"postal_code\"){\n            \n              ind = data.results[i].address_components[0].long_name;  \n          }\n    \n          if(data.results[i].types[0]==\"locality\"){\n    \n              ind1 = data.results[i].address_components[0].long_name; \n          }\n         \n        }\n        let res = JSON.stringify(data.results[0].address_components[6].types[0])\n        \n        this.setState({\n            myLocation: location,\n            zipCode: ind,\n            locationLoading: true,\n            city: ind1\n            \n        },() => {\n         \n          this.getDogParks();\n      });\n       \n    };\n\n    getDogParks = async () => {\n        console.log(\"city\"+this.state.city)\n    \n        const response = await fetch(GOOGLE_PLACEAPI+this.state.city+'&key='+key)\n        const data = await response.json()\n        this.setState({\n          DogParks: data.results\n        });\n    \n        let res = JSON.stringify(this.state.DogParks[3])\n       \n       this.getDogParkPhoto()\n      }\n\n      getDogParkPhoto = async () => {\n\n        let response1\n        let response2\n        let response3\n        let response4\n     \n         const url1 = `https://maps.googleapis.com/maps/api/place/photo?maxwidth=1000&photoreference=${this.state.DogParks[0]?this.state.DogParks[0].photos[0].photo_reference: imageUnavailable}&key=AIzaSyCKtd8tWSWZ1jMR8tw11c-FgmIPsF9Ycqk`\n          response1 = await fetch(url1)\n          \n         const url2 = `https://maps.googleapis.com/maps/api/place/photo?maxwidth=1000&photoreference=${this.state.DogParks[1]?this.state.DogParks[1].photos[0].photo_reference: imageUnavailable}&key=AIzaSyCKtd8tWSWZ1jMR8tw11c-FgmIPsF9Ycqk`\n          response2 = await fetch(url2)\n     \n         const url3 = `https://maps.googleapis.com/maps/api/place/photo?maxwidth=1000&photoreference=${this.state.DogParks[2]?this.state.DogParks[2].photos[0].photo_reference: imageUnavailable}&key=AIzaSyCKtd8tWSWZ1jMR8tw11c-FgmIPsF9Ycqk`\n          response3 = await fetch(url3)\n         \n         const url4 = `https://maps.googleapis.com/maps/api/place/photo?maxwidth=1000&photoreference=${this.state.DogParks[3]?this.state.DogParks[3].photos[0].photo_reference: imageUnavailable}&key=AIzaSyCKtd8tWSWZ1jMR8tw11c-FgmIPsF9Ycqk`\n          response4 = await fetch(url4)\n     \n         this.setState({\n           DogParkPhotos: [response1,response2,response3,response4],\n           loadingPark: true\n         })\n        }\n         \n\n     render(){\n        const card = this.props.navigation.getParam('card','');\n        return(\n            <View >\n            <ScrollView style={{paddingTop: 5}}>\n                 \n            <Text style={{fontWeight: 'bold',color:'#ff0000', fontSize: 40,paddingLeft: (width/2)-100}}>Its a Match!</Text>\n            <Text style={{paddingLeft: (width/2)-100,paddingTop: 10, fontWeight:'bold'}}>You and {card.dogname} Liked each other</Text>\n            <View\n            style={{\n             flexDirection: \"row\",\n             flexWrap: \"wrap\",\n             justifyContent: \"space-between\",\n             paddingTop: 5\n           }}\n         >\n        <View style={{paddingTop: 3,paddingLeft: 15, flex: 1}}>\n        <Image style={styles1.imageContainer} source={{uri: this.props.dog.photo}}/>\n        <Text style={styles1.title}>{this.props.dog.dogname}</Text>\n        <Text style={styles1.caption}>{this.props.dog.breed}</Text>\n        </View>\n        <View style={{paddingTop: 3,paddingLeft: 15, flex: 1}}>\n        <Image style={styles1.imageContainer} source={{uri: card.photo}}/>\n        <Text style={styles1.title}>{card.dogname}</Text>\n        <Text style={styles1.caption}>{card.breed}</Text>\n        </View>\n        </View>\n        <Text style={{paddingTop: 8, paddingHorizontal: 25,paddingBottom: 10,fontWeight:'bold'}}>Plan a play date at the nearest dog park which is:</Text>\n        <View style={{paddingLeft: 100}}>\n        <DogParks\n            imageUri={this.state.DogParkPhotos[0] ? this.state.DogParkPhotos[0].url: imageUnavailable}\n            width={width}\n            name={this.state.DogParks[0] ? this.state.DogParks[0].name : \"No dog Park Available\"}\n            type={this.state.DogParks[0] ? this.state.DogParks[0].formatted_address :\"No dog Park Available\"}\n          />\n         </View>\n         <View\n            style={{\n             flexDirection: \"row\",\n             flexWrap: \"wrap\",\n             justifyContent: \"space-between\",\n           }}\n         >\n         <TouchableOpacity style={styles1.button} onPress={() => this.props.navigation.navigate('Chat', {user: card, page:'ItsaMatch'})}>\n              <Text style={styles.bold}>Chat</Text>\n            </TouchableOpacity>\n            <TouchableOpacity style={styles1.button} onPress={() => this.props.navigation.goBack()}>\n              <Text style={styles.bold}>Continue Swiping</Text>\n            </TouchableOpacity>\n            </View>\n            <ConfettiCannon count={200} fallSpeed={4000} fadeOut={true} origin={{x: -10, y: 0} } />\n        </ScrollView>\n        </View>       \n        );\n    }\n  \n}\n\nconst styles1 = StyleSheet.create({\n    container: {\n      flex: 1,\n      alignItems: 'center',\n    },\n    button: {\n        margin: 5,\n        padding: 3,\n        alignItems: 'center',\n        borderColor: '#d3d3d3',\n        borderWidth: 1,\n        borderRadius: 5,\n        width: 150\n      },\n    imageContainer: {\n      width: ((width*.93)-30)/2,\n      height: (height - BOTTOM_BAR_HEIGHT * 12)/1.5,\n      borderRadius: 25,\n      overflow: 'hidden', // this does magic\n    },\n    title: {\n      position: 'absolute',\n      left: 25 ,\n      bottom: 30,\n      fontSize: 25,\n      fontWeight: 'bold',\n      color: '#fff'\n    },\n    caption: {\n      position: 'absolute',\n      left: 25,\n      bottom: 10,\n      fontSize: 15,\n      color: '#fff'\n    },\n  })\n\nconst mapDispatchToProps = (dispatch) => {\n    return bindActionCreators({getDog,getDogs}, dispatch)\n  }\n  \n  const mapStateToProps = (state) => {\n    return {\n      post: state.post,\n      user: state.user,\n      userprofile: state.profile,\n      dog: state.dog,\n      cards: state.cards\n    }\n  }\n  \n  export default connect(mapStateToProps, mapDispatchToProps)(ItsAMatch)"]},"metadata":{},"sourceType":"module"}