{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nvar _jsxFileName = \"/Users/kharl/pawSpace/screens/Camera.js\";\nimport React from 'react';\nimport styles from \"../styles\";\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { uploadPhoto } from \"../actions/index\";\nimport { updatePhoto } from \"../actions/post\";\nimport { Camera, Permissions } from 'expo';\nimport * as ImageManipulator from 'expo-image-manipulator';\nimport { Ionicons } from '@expo/vector-icons';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\n\nvar CameraUpload = function (_React$Component) {\n  _inherits(CameraUpload, _React$Component);\n\n  function CameraUpload() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CameraUpload);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CameraUpload)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.snapPhoto = function _callee() {\n      var _await$Permissions$as, status, image, resize, url;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA));\n\n            case 2:\n              _await$Permissions$as = _context.sent;\n              status = _await$Permissions$as.status;\n\n              if (!(status === 'granted')) {\n                _context.next = 17;\n                break;\n              }\n\n              _context.next = 7;\n              return _regeneratorRuntime.awrap(_this.camera.takePictureAsync());\n\n            case 7:\n              image = _context.sent;\n\n              if (image.cancelled) {\n                _context.next = 17;\n                break;\n              }\n\n              _context.next = 11;\n              return _regeneratorRuntime.awrap(ImageManipulator.manipulateAsync(image.uri, [], {\n                format: 'jpg',\n                compress: 0.1\n              }));\n\n            case 11:\n              resize = _context.sent;\n              _context.next = 14;\n              return _regeneratorRuntime.awrap(_this.props.dispatch(uploadPhoto(resize)));\n\n            case 14:\n              url = _context.sent;\n\n              _this.props.dispatch(updatePhoto(url));\n\n              url ? _this.props.navigation.navigate('Post') : null;\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(CameraUpload, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Camera, {\n        style: {\n          flex: 1\n        },\n        ref: function ref(_ref) {\n          _this2.camera = _ref;\n        },\n        type: Camera.Constants.Type.back,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29\n        }\n      }, React.createElement(SafeAreaView, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30\n        }\n      }, React.createElement(TouchableOpacity, {\n        style: {\n          paddingLeft: 30\n        },\n        onPress: function onPress() {\n          return _this2.props.navigation.goBack();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31\n        }\n      }, React.createElement(Ionicons, {\n        color: 'white',\n        name: 'ios-arrow-back',\n        size: 50,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32\n        }\n      }))), React.createElement(TouchableOpacity, {\n        style: styles.cameraButton,\n        onPress: function onPress() {\n          return _this2.snapPhoto();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35\n        }\n      }));\n    }\n  }]);\n\n  return CameraUpload;\n}(React.Component);\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    uploadPhoto: uploadPhoto,\n    updatePhoto: updatePhoto\n  }, dispatch);\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {};\n};\n\nexport default connect(mapStateToProps)(CameraUpload);","map":{"version":3,"sources":["/Users/kharl/pawSpace/screens/Camera.js"],"names":["React","styles","connect","bindActionCreators","uploadPhoto","updatePhoto","Camera","Permissions","ImageManipulator","Ionicons","CameraUpload","snapPhoto","askAsync","CAMERA","status","camera","takePictureAsync","image","cancelled","manipulateAsync","uri","format","compress","resize","props","dispatch","url","navigation","navigate","flex","ref","Constants","Type","back","paddingLeft","goBack","cameraButton","Component","mapDispatchToProps","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React from 'react';\nimport styles from '../styles'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { uploadPhoto } from '../actions/index';\nimport { updatePhoto } from '../actions/post';\nimport { Camera, Permissions} from 'expo';\nimport * as ImageManipulator from 'expo-image-manipulator'\nimport { Ionicons } from '@expo/vector-icons'\nimport { Text, View, SafeAreaView, TouchableOpacity } from 'react-native';\n\nclass CameraUpload extends React.Component {\n\n  snapPhoto = async () => {\n    const { status } = await Permissions.askAsync(Permissions.CAMERA)\n    if (status === 'granted') {\n      const image = await this.camera.takePictureAsync()\n      if(!image.cancelled ){\n        const resize = await ImageManipulator.manipulateAsync(image.uri, [], { format: 'jpg', compress: 0.1 })\n        const url = await this.props.dispatch(uploadPhoto(resize))\n        this.props.dispatch(updatePhoto(url))\n        url ? this.props.navigation.navigate('Post') : null\n      }\n    }\n  }\n\n  render() {\n    return (\n      <Camera style={{flex:1}} ref={ref => { this.camera = ref }} type={Camera.Constants.Type.back}>\n        <SafeAreaView style={{flex:1}}>\n          <TouchableOpacity style={{ paddingLeft: 30 }} onPress={() => this.props.navigation.goBack()} >\n            <Ionicons color={'white'} name={'ios-arrow-back'} size={50}/>\n          </TouchableOpacity>\n        </SafeAreaView>\n        <TouchableOpacity style={styles.cameraButton} onPress={() => this.snapPhoto()} />\n      </Camera>\n    );\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({ uploadPhoto, updatePhoto }, dispatch)\n}\n\nconst mapStateToProps = (state) => {\n  return {}\n}\n\nexport default connect(mapStateToProps)(CameraUpload)"]},"metadata":{},"sourceType":"module"}