{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nvar _jsxFileName = \"/Users/kharl/pawSpace/screens/Chat.js\";\nimport React from 'react';\nimport styles from \"../styles\";\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { addMessage, getMessages } from \"../actions/message\";\nimport moment from 'moment';\nimport db from \"../config/firebase\";\n\nvar Chat = function (_React$Component) {\n  _inherits(Chat, _React$Component);\n\n  function Chat() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Chat);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Chat)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      message: ''\n    };\n\n    _this.componentDidMount = function () {\n      _this.props.getMessages();\n\n      var params = _this.props.navigation.state.params;\n      var res = JSON.stringify(params);\n      console.log(\"param: \" + res);\n\n      if (params.page === 'ChatMatch') {\n        _this.props.navigation.setParams({\n          headerPic: params.user.photoUrl\n        });\n\n        _this.props.navigation.setParams({\n          headerTitle: params.user.name\n        });\n\n        _this.props.navigation.setParams({\n          headerId: params.user.id\n        });\n      } else {\n        _this.props.navigation.setParams({\n          headerPic: params.user.photo\n        });\n\n        _this.props.navigation.setParams({\n          headerTitle: params.user.dogname\n        });\n\n        _this.props.navigation.setParams({\n          headerId: params.user.dogId\n        });\n      }\n    };\n\n    _this.sendMessage = function () {\n      var params = _this.props.navigation.state.params;\n\n      _this.props.addMessage(params, _this.state.message);\n\n      _this.setState({\n        message: ''\n      });\n    };\n\n    _this.goToDog = function (message) {\n      _this.props.getDog(message.dogId);\n\n      _this.props.navigation.navigate('Profile');\n    };\n\n    return _this;\n  }\n\n  _createClass(Chat, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var dogId = this.props.dog.dogId;\n      if (!this.props.messages) return React.createElement(ActivityIndicator, {\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        }\n      });\n      return React.createElement(KeyboardAvoidingView, {\n        enabled: true,\n        behavior: \"padding\",\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        }\n      }, React.createElement(FlatList, {\n        inverted: true,\n        keyExtractor: function keyExtractor(item) {\n          return JSON.stringify(item.date);\n        },\n        data: this.props.messages,\n        renderItem: function renderItem(_ref) {\n          var item = _ref.item;\n          return React.createElement(View, {\n            style: [styles.row, styles.space],\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 60\n            }\n          }, item.dogId !== dogId ? React.createElement(Image, {\n            style: styles.roundImage,\n            source: {\n              uri: item.photo\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 61\n            }\n          }) : null, React.createElement(View, {\n            style: [styles.container, item.dogId === dogId ? styles.right : styles.left],\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 62\n            }\n          }, React.createElement(Text, {\n            style: styles.bold,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 63\n            }\n          }, item.username), React.createElement(Text, {\n            style: styles.gray,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 64\n            }\n          }, item.message), React.createElement(Text, {\n            style: [styles.gray, styles.small],\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 65\n            }\n          }, moment(item.date).format('lll'))), item.dogId === dogId ? React.createElement(Image, {\n            style: styles.roundImage,\n            source: {\n              uri: item.photo\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 67\n            }\n          }) : null);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        }\n      }), React.createElement(KeyboardAvoidingView, {\n        enabled: true,\n        behavior: \"padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        }\n      }, React.createElement(TextInput, {\n        style: styles.input,\n        onChangeText: function onChangeText(message) {\n          return _this2.setState({\n            message: message\n          });\n        },\n        value: this.state.message,\n        returnKeyType: \"send\",\n        placeholder: \"Send Message\",\n        onSubmitEditing: this.sendMessage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        }\n      })));\n    }\n  }]);\n\n  return Chat;\n}(React.Component);\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    addMessage: addMessage,\n    getMessages: getMessages\n  }, dispatch);\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    user: state.user,\n    messages: state.messages,\n    dog: state.dog,\n    post: state.post\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Chat);","map":{"version":3,"sources":["/Users/kharl/pawSpace/screens/Chat.js"],"names":["React","styles","connect","bindActionCreators","addMessage","getMessages","moment","db","Chat","state","message","componentDidMount","props","params","navigation","res","JSON","stringify","console","log","page","setParams","headerPic","user","photoUrl","headerTitle","name","headerId","id","photo","dogname","dogId","sendMessage","setState","goToDog","getDog","navigate","dog","messages","container","item","date","row","space","roundImage","uri","right","left","bold","username","gray","small","format","input","Component","mapDispatchToProps","dispatch","mapStateToProps","post"],"mappings":"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","sourcesContent":["import React from 'react';\nimport styles from '../styles'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { View, Text, TextInput, FlatList, KeyboardAvoidingView, TouchableOpacity, Image, ActivityIndicator } from 'react-native';\nimport { addMessage, getMessages } from '../actions/message';\nimport moment from 'moment'\nimport db from '../config/firebase';\n\nclass Chat extends React.Component {\n  state = {\n    message: '',\n  }\n\n  componentDidMount = () => {\n    this.props.getMessages()\n    const { params } = this.props.navigation.state\n    \n    let res = JSON.stringify(params)\n    console.log(\"param: \"+res)\n\n    if(params.page==='ChatMatch'){\n    this.props.navigation.setParams({headerPic: params.user.photoUrl });\n    this.props.navigation.setParams({headerTitle: params.user.name });\n    this.props.navigation.setParams({headerId: params.user.id });\n    }\n    else{\n        this.props.navigation.setParams({headerPic: params.user.photo });\n        this.props.navigation.setParams({headerTitle: params.user.dogname });\n        this.props.navigation.setParams({headerId: params.user.dogId });\n    }\n    \n  }\n\n  \n\n  sendMessage = () => {\n    const { params } = this.props.navigation.state\n\n    this.props.addMessage(params, this.state.message)\n    this.setState({message: ''})\n  }\n\n  goToDog = (message) => {\n    this.props.getDog(message.dogId)\n    this.props.navigation.navigate('Profile')\n  }\n\n  render() {\n    \n    const { dogId } = this.props.dog\n    if (!this.props.messages) return <ActivityIndicator style={styles.container}/>\n    return (\n      <KeyboardAvoidingView enabled behavior='padding' style={styles.container}>\n        <FlatList\n          inverted\n          keyExtractor={(item) => JSON.stringify(item.date)}\n          data={this.props.messages}\n          renderItem={({ item }) => (\n          <View style={[styles.row, styles.space]}>\n            { item.dogId !== dogId ? <Image style={styles.roundImage} source={{uri: item.photo}}/> : null}\n            <View style={[styles.container, item.dogId === dogId ? styles.right : styles.left]}>\n              <Text style={styles.bold}>{item.username}</Text>\n              <Text style={styles.gray}>{item.message}</Text>\n              <Text style={[styles.gray, styles.small]}>{moment(item.date).format('lll')}</Text>\n            </View>\n            { item.dogId === dogId ? <Image style={styles.roundImage} source={{uri: item.photo}}/> : null}\n          </View>\n        )}/> \n        <KeyboardAvoidingView enabled behavior='padding'>\n        <TextInput\n          style={styles.input}\n          onChangeText={(message) => this.setState({message})}\n          value={this.state.message}\n          returnKeyType='send'\n          placeholder='Send Message'\n          onSubmitEditing={this.sendMessage}/>\n          </KeyboardAvoidingView>\n      </KeyboardAvoidingView>\n    );\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators({ addMessage, getMessages }, dispatch)\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    user: state.user,\n    messages: state.messages,\n    dog: state.dog,\n    post: state.post\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Chat)"]},"metadata":{},"sourceType":"module"}